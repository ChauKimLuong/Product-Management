extends ../../layouts/default.pug 
include ../../mixins/box-head.pug

block main
    .container.my-3
        .row
            .col-12
                +box-head(pageTitle)
        .row 
            .col-12   
                .chat(my-id=user.id)
                    .inner-body     
                        each message in messages 
                            if (message.user_id != user.id)
                                .inner-incoming 
                                    .inner-name #{message.infoUser.fullName}
                                    if (message.content)
                                        .inner-content #{message.content}
                                    if (message.images.length > 0)
                                        each image in message.images 
                                            .inner-images
                                                img(src=image, alt=image)
                                    
                            else 
                                .inner-outgoing
                                    if (message.content)
                                        .inner-content #{message.content}
                                    if (message.images.length > 0)
                                        each image in message.images 
                                            .inner-images
                                                img.viewer-img(src=image, alt=image)
                                    
                        .inner-list-typing

                    .inner-preview-images
                        .custom-file-container(data-upload-id="upload-images")

                    .inner-foot
                        form.inner-form(action="")
                            input(
                                type="text"
                                name="content" 
                                placeholder="Nhập nội dung"
                            ) 
                            span.button-upload-images
                                i.fa-solid.fa-image
                            span.button-emoji-icon 
                                i.fa-solid.fa-face-smile
                            button
                                i.fa-solid.fa-paper-plane
    .tooltip(role="tooltip")
        emoji-picker.light
